(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{18:function(e,n,t){e.exports=t(41)},40:function(e,n,t){},41:function(e,n,t){"use strict";t.r(n);var a=t(0),r=t.n(a),c=t(15),u=t.n(c),o=t(16),l=t(17),i=t(2),m=function(e){var n=e.person,t=e.handleDelete;return r.a.createElement("div",null,n.name," ",n.number," ",r.a.createElement("button",{onClick:function(){return t(n.id)}},"delete"))},s=function(e){var n=e.persons,t=e.handleDelete;return r.a.createElement("div",null,n.map((function(e){return r.a.createElement(m,{key:e.name,person:e,handleDelete:t})})))},d=function(e){var n=e.handleSetName,t=e.handleSubmit,a=e.newName,c=e.newNumber,u=e.handleSetNumber;return r.a.createElement("form",{onSubmit:t},r.a.createElement("div",null,"name: ",r.a.createElement("input",{value:a,onChange:n})),r.a.createElement("div",null,"number: ",r.a.createElement("input",{value:c,onChange:u})),r.a.createElement("div",null,r.a.createElement("button",{type:"submit"},"add")))},f=function(e){var n=e.handleFilter;return r.a.createElement("div",null,"filter shown with: ",r.a.createElement("input",{onChange:n}))},h=t(4),b=t.n(h),v="/api/persons",p=function(){return b.a.get(v).then((function(e){return e.data}))},E=function(e,n){return b.a.put("".concat(v,"/").concat(e),n).then((function(e){return e.data}))},w=function(e){return b.a.post(v,e).then((function(e){return e.data}))},j=function(e){return b.a.delete("".concat(v,"/").concat(e))},O=function(e){var n=e.message,t=e.type,a=e.setMessage;return null===n?null:(setTimeout((function(){return a(null)}),5e3),r.a.createElement("div",{className:t},n))},S=function(){var e=Object(a.useState)([]),n=Object(i.a)(e,2),t=n[0],c=n[1],u=Object(a.useState)(""),m=Object(i.a)(u,2),h=m[0],b=m[1],v=Object(a.useState)(""),S=Object(i.a)(v,2),g=S[0],k=S[1],N=Object(a.useState)(!0),y=Object(i.a)(N,2),C=y[0],D=y[1],L=Object(a.useState)(""),M=Object(i.a)(L,2),T=M[0],F=M[1],I=Object(a.useState)(null),J=Object(i.a)(I,2),x=J[0],A=J[1],B=Object(a.useState)(""),P=Object(i.a)(B,2),q=P[0],z=P[1];Object(a.useEffect)((function(){p().then((function(e){c(e)}))}),[]);var G=C?t:t.filter((function(e){return e.name.toLowerCase().includes(T.toLowerCase())}));return r.a.createElement("div",null,r.a.createElement("h2",null,"Phonebook"),x&&r.a.createElement(O,{message:x,type:q,setMessage:A}),r.a.createElement(f,{handleFilter:function(e){var n=e.target.value;n?(D(!1),F(n)):(D(!0),F(""))}}),r.a.createElement("h3",null,"Add a new"),r.a.createElement(d,{handleSubmit:function(e){e.preventDefault();var n=t.find((function(e){return e.name.toLowerCase()===h.toLowerCase()}));if(n){if(window.confirm("".concat(h,"is already added to phonebook, replace the older number with the new one?"))){var a=Object(l.a)({},n,{number:g}),r=n.id;E(r,a).then((function(e){c(t.map((function(n){return n.id!==r?n:e}))),A("Then number for ".concat(a.name," has been updated")),z("success")})).catch((function(e){A("Then replacing the number for ".concat(a.name," failed")),z("error")}))}return b(""),void k("")}var u={name:h,number:g};w(u).then((function(e){c([].concat(Object(o.a)(t),[e])),A("".concat(u.name," has been succesfully added to phonebook")),z("success")})).catch((function(e){A("".concat(u.name," could not be added to phonebook")),z("error")})),b(""),k("")},handleSetName:function(e){b(e.target.value)},handleSetNumber:function(e){k(e.target.value)},newName:h,newNumber:g}),r.a.createElement("h2",null,"Numbers"),r.a.createElement(s,{persons:G,handleDelete:function(e){var n=t.find((function(n){return n.id===e}));window.confirm("Delete ".concat(n.name,"?"))&&j(e).then((function(){c(t.filter((function(n){return n.id!==e}))),A("".concat(n.name," has been succesfully removed from server")),z("success")})).catch((function(a){A("Information of ".concat(n.name," has already been removed from server")),z("error"),c(t.filter((function(n){return n.id!==e})))}))}}))};t(40);u.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(S,null)),document.getElementById("root"))}},[[18,1,2]]]);
//# sourceMappingURL=main.e26d24c4.chunk.js.map